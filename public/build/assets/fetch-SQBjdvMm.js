var j={headers:{},mergeStrategy:"replace",transitions:!1,mapDelimiter:":"},B=()=>{console.error(`You can't use the "morph" merge without first installing the Alpine "morph" plugin here: https://alpinejs.dev/plugins/morph`)};function A(e){e.morph&&(B=e.morph),e.addInitSelector(()=>`[${e.prefixed("target")}]`),e.addInitSelector(()=>`[${e.prefixed("target\\.push")}]`),e.addInitSelector(()=>`[${e.prefixed("target\\.replace")}]`),e.directive("target",(r,{value:n,modifiers:i,expression:s},{evaluateLater:a,effect:l})=>{let u=c=>{r._ajax_target=r._ajax_target||{};let f={ids:F(r,c),sync:!0,focus:!i.includes("nofocus"),history:i.includes("push")?"push":i.includes("replace")?"replace":!1},d=i.filter(h=>["back","away","error"].includes(h)||parseInt(h));d=d.length?d:["xxx"],d.forEach(h=>{h.charAt(0)==="3"&&(h="3xx"),r._ajax_target[h]=f})};if(n==="dynamic"){let c=a(s);l(()=>c(u))}else u(s)}),e.directive("headers",(r,{expression:n},{evaluateLater:i,effect:s})=>{let a=i(n||"{}");s(()=>{a(l=>{r._ajax_headers=l})})}),e.addInitSelector(()=>`[${e.prefixed("merge")}]`),e.addInitSelector(()=>`[${e.prefixed("merge\\.transition")}]`),e.directive("merge",(r,{value:n,modifiers:i,expression:s},{evaluateLater:a,effect:l})=>{let u=c=>{r._ajax_strategy=c,r._ajax_transition=j.transitions||i.includes("transition")};if(n==="dynamic"){let c=a(s);l(()=>c(u))}else u(s)}),e.magic("ajax",r=>async(n,i={})=>{let s={el:r,target:{xxx:{ids:F(r,i.targets||i.target),sync:!!i.sync,history:"history"in i?i.history:!1,focus:"focus"in i?i.focus:!0}},headers:i.headers||{}},a=i.method?i.method.toUpperCase():"GET",l=i.body;return O(s,n,a,l)});let t=!1;e.ajax={start(){t||(document.addEventListener("submit",C),document.addEventListener("click",R),window.addEventListener("popstate",D),t=!0)},configure:A.configure,stop(){document.removeEventListener("submit",C),document.removeEventListener("click",R),window.removeEventListener("popstate",D),t=!1}},e.ajax.start()}A.configure=e=>(j=Object.assign(j,e),A);var G=A;function D(e){!e.state||!e.state.__ajax||window.location.reload(!0)}async function R(e){if(e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;let t=e?.target.closest("a[href]:not([download]):not([noajax])");if(!t||!t._ajax_target||t.isContentEditable||t.origin!==window.location.origin||t.getAttribute("href").startsWith("#")||t.hash&&M(t,new URL(document.baseURI)))return;e.preventDefault(),e.stopImmediatePropagation();let r={el:t,target:t._ajax_target,headers:t._ajax_headers||{}},n=t.getAttribute("href");try{return await O(r,n)}catch(i){if(i.name==="RenderError"){console.warn(i.message),window.location.href=t.href;return}throw i}}async function C(e){if(e.defaultPrevented)return;let t=e.target,r=e.submitter,n=(r?.getAttribute("formmethod")||t.getAttribute("method")||"GET").toUpperCase();if(!t||!t._ajax_target||n==="DIALOG"||r?.hasAttribute("formnoajax")||r?.hasAttribute("formtarget")||t.hasAttribute("noajax")||t.hasAttribute("target"))return;e.preventDefault(),e.stopImmediatePropagation();let i={el:t,target:t._ajax_target,headers:t._ajax_headers||{}},s=new FormData(t),a=t.getAttribute("enctype"),l=t.getAttribute("action");r&&(a=r.getAttribute("formenctype")||a,l=r.getAttribute("formaction")||l,r.name&&s.append(r.name,r.value));try{return await W(r,()=>O(i,l,n,s,a))}catch(u){if(u.name==="RenderError"){console.warn(u.message),t.setAttribute("noajax","true"),t.requestSubmit(r);return}throw u}}async function W(e,t){if(!e)return await t();let r=i=>i.preventDefault();e.setAttribute("aria-disabled","true"),e.addEventListener("click",r);let n;try{n=await t()}finally{e.removeAttribute("aria-disabled"),e.removeEventListener("click",r)}return n}var x={store:new Map,plan(e,t){if(e.ids.forEach(r=>{let n=r[0],i=["_self","_top","_none"].includes(n)?document.documentElement:document.getElementById(n);if(!i)return console.warn(`Target [#${n}] was not found in current document.`);i._ajax_id=r[1],this.set(i,t)}),e.sync){let r=e.ids.flat();document.querySelectorAll("[x-sync]").forEach(n=>{let i=n.getAttribute("id");if(!i)throw new H(n);r.includes(i)||(n._ajax_id=i,n._ajax_sync=!0,this.set(n,t))})}},purge(e){this.store.forEach((t,r)=>e===t&&this.delete(r))},get(e){let t=[];return this.store.forEach((r,n)=>e===r&&t.push(n)),t},set(e,t){e.querySelectorAll("[aria-busy]").forEach(r=>{this.delete(r)}),e.setAttribute("aria-busy","true"),this.store.set(e,t)},delete(e){e.removeAttribute("aria-busy"),this.store.delete(e)}},_=new Map;async function O(e,t="",r="GET",n=null,i="application/x-www-form-urlencoded"){if(!g(e.el,"ajax:before"))return;let s=e.target.xxx,a={ok:!1,redirected:!1,url:"",status:"",html:"",raw:""};x.plan(s,a);let l=new URL(e.el.closest("[data-source]")?.dataset.source||"",document.baseURI);t=new URL(t||l,document.baseURI),n&&(n=K(n),r==="GET"?(t.search=P(n).toString(),n=null):i!=="multipart/form-data"&&n instanceof FormData?n=P(n):i=null);let u={action:t.toString(),method:r,body:n,enctype:i,referrer:l.toString(),headers:Object.assign({"X-Alpine-Request":!0,"X-Alpine-Target":x.get(a).map(o=>o._ajax_id).join(" ")},j.headers,e.headers)};u.enctype||delete u.enctype,g(e.el,"ajax:send",u);let c;if(u.method==="GET"&&_.has(u.action)?c=_.get(u.action):(c=fetch(u.action,u).then(async o=>{let p=await o.text(),w=document.createRange().createContextualFragment("<template>"+p+"</template>");return o.html=w.firstElementChild.content,o.raw=p,o}),_.set(u.action,c)),await c.then(o=>{a.ok=o.ok,a.redirected=o.redirected,a.url=o.url,a.status=o.status,a.html=o.html,a.raw=o.raw}),a.ok?(a.redirected&&(g(e.el,"ajax:redirect",a),_.set(a.url,c),setTimeout(()=>{_.delete(a.url)},5)),g(e.el,"ajax:success",a)):g(e.el,"ajax:error",a),g(e.el,"ajax:sent",a),_.delete(u.action),!a.html){x.purge(a);return}let f=a.redirected?"3xx":a.status.toString(),d=M(new URL(a.url),new URL(u.referrer,document.baseURI)),h=[a.redirected?d?"back":"away":null,f,f.charAt(0)+"xx",a.ok?"xxx":"error","xxx"].find(o=>o in e.target);h!=="xxx"&&(s=e.target[h],(!a.redirected||!d||!s.ids.flat().includes("_self"))&&(x.purge(a),x.plan(s,a))),s.history&&X(s.history,a.url);let m=!s.focus,b=x.get(a).map(async o=>{if(!o.isConnected||o._ajax_id==="_none"){x.delete(o);return}if(o===document.documentElement){window.location.href=a.url;return}let p=a.html.getElementById(o._ajax_id);if(!p){if(o._ajax_sync||!g(e.el,"ajax:missing",{target:o,response:a}))return;if(a.ok)return o.remove();throw new J(o,a.status)}let w=o._ajax_strategy||j.mergeStrategy,I=async()=>{if(o=await V(w,o,p),o){o.dataset.source=a.url,x.delete(o);let k=["[x-autofocus]","[autofocus]"];for(;!m&&k.length;){let v=k.shift();o.matches(v)&&(m=U(o)),m=m||Array.from(o.querySelectorAll(v)).some(S=>U(S))}}return g(o,"ajax:merged"),o};if(g(o,"ajax:merge",{strategy:w,content:p,merge:I}))return I()}),E=await Promise.all(b);return g(e.el,"ajax:after",{response:a,render:E}),E}function K(e){if(e instanceof FormData)return e;if(e instanceof HTMLFormElement)return new FormData(e);if(typeof e=="string"||e instanceof ArrayBuffer||e instanceof DataView||e instanceof Blob||e instanceof File||e instanceof URLSearchParams||e instanceof ReadableStream)return e;const t=new FormData;for(let r in e)typeof e[r]=="object"?t.append(r,JSON.stringify(e[r])):t.append(r,e[r]);return t}function P(e){let t=Array.from(e.entries()).filter(([r,n])=>!(n instanceof File));return new URLSearchParams(t)}async function V(e,t,r){let n={before(s,a){return s.before(...a.childNodes),s},replace(s,a){return s.replaceWith(a),a},update(s,a){return s.replaceChildren(...a.childNodes),s},prepend(s,a){return s.prepend(...a.childNodes),s},append(s,a){return s.append(...a.childNodes),s},after(s,a){return s.after(...a.childNodes),s},morph(s,a){return B(s,a),document.getElementById(a.getAttribute("id"))}};return!t._ajax_transition||!document.startViewTransition?n[e](t,r):(await document.startViewTransition(()=>(t=n[e](t,r),Promise.resolve())).updateCallbackDone,t)}function U(e){return!e||!e.getClientRects().length?!1:(setTimeout(()=>{e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.focus()},0),!0)}function X(e,t){return{push:()=>window.history.pushState({__ajax:!0},"",t),replace:()=>window.history.replaceState({__ajax:!0},"",t)}[e]()}function F(e,t=null){let r=e.getAttribute("id"),n=[r];if(t&&(n=Array.isArray(t)?t:t.split(" ")),n=n.filter(i=>i).map(i=>{let s=i.split(j.mapDelimiter).map(a=>a||r);return s[1]=s[1]||s[0],s}),n.length===0)throw new H(e);return n}function g(e,t,r){return e.dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,composed:!0,cancelable:!0}))}function M(e,t){return $(e.pathname)===$(t.pathname)}function $(e){return e.replace(/\/$/,"")}var H=class extends DOMException{constructor(e){let t=(e.outerHTML.match(/<[^>]+>/)??[])[0]??"[Element]";super(`${t} is missing an ID to target.`,"IDError")}},J=class extends DOMException{constructor(e,t){let r=e.getAttribute("id");super(`Target [#${r}] was not found in response with status [${t}].`,"RenderError")}},ne=G;async function Y(e,t){const r=e.getReader();let n;for(;!(n=await r.read()).done;)t(n.value)}function z(e){let t,r,n,i=!1;return function(a){t===void 0?(t=a,r=0,n=-1):t=Z(t,a);const l=t.length;let u=0;for(;r<l;){i&&(t[r]===10&&(u=++r),i=!1);let c=-1;for(;r<l&&c===-1;++r)switch(t[r]){case 58:n===-1&&(n=r-u);break;case 13:i=!0;case 10:c=r;break}if(c===-1)break;e(t.subarray(u,c),n),u=r,n=-1}u===l?t=void 0:u!==0&&(t=t.subarray(u),r-=u)}}function Q(e,t,r){let n=N();const i=new TextDecoder;return function(a,l){if(a.length===0)r?.(n),n=N();else if(l>0){const u=i.decode(a.subarray(0,l)),c=l+(a[l+1]===32?2:1),f=i.decode(a.subarray(c));switch(u){case"data":n.data=n.data?n.data+`
`+f:f;break;case"event":n.event=f;break;case"id":e(n.id=f);break;case"retry":const d=parseInt(f,10);isNaN(d)||t(n.retry=d);break}}}}function Z(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function N(){return{data:"",event:"",id:"",retry:void 0}}var ee=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const L="text/event-stream",te=1e3,q="last-event-id";function ae(e,t){var{signal:r,headers:n,onopen:i,onmessage:s,onclose:a,onerror:l,openWhenHidden:u,fetch:c}=t,f=ee(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((d,h)=>{const m=Object.assign({},n);m.accept||(m.accept=L);let b;function E(){b.abort(),document.hidden||v()}u||document.addEventListener("visibilitychange",E);let o=te,p=0;function w(){document.removeEventListener("visibilitychange",E),window.clearTimeout(p),b.abort()}r?.addEventListener("abort",()=>{w(),d()});const I=c??window.fetch,k=i??re;async function v(){var S;b=new AbortController;try{const T=await I(e,Object.assign(Object.assign({},f),{headers:m,signal:b.signal}));await k(T),await Y(T.body,z(Q(y=>{y?m[q]=y:delete m[q]},y=>{o=y},s))),a?.(),w(),d()}catch(T){if(!b.signal.aborted)try{const y=(S=l?.(T))!==null&&S!==void 0?S:o;window.clearTimeout(p),p=window.setTimeout(v,y)}catch(y){w(),h(y)}}}v()})}function re(e){const t=e.headers.get("content-type");if(!t?.startsWith(L))throw new Error(`Expected content-type to be ${L}, Actual: ${t}`)}export{ae as f,ne as m};
